# **Dia 27/01 - Docker**

<<<<<<< HEAD
1. [**O que √© Docker?**](#o-que-√©-docker?)
=======
1. [**O que √© Docker?**](#O-que-√©-Docker?-üê≥)
>>>>>>> 0434950ca3c9fe6092979048be2d8b164f80d3da
    - Vantagens e desvantagens do uso do Docker
        - Vantagens
        - Desvantagens
    - Casos de uso do Docker
2. **Instala√ß√£o e Configura√ß√£o üõ†Ô∏è**
    - Windows
    - macOS
    - Linuz
    - Configura√ß√£o inicial e primeiros passos
        - Configura√ß√£o inicial
        - Docker CLI (linha de comando)
3. **Fundamentos do Docker üß†**
    - Conceitos b√°sicos: `Containers`, `Imagens` e `Registries`
        - Containers
        - Imagens
        - Registries
    - Arquitetura do Docker
        - Docker Engine
        - Docker Desktop
    - Dockerfile: Estrutura e Sintaxe
        - Estrutura B√°sica
        - Exemplo do Dockerfile
    - Criando e construindo imagens Docker
        - Comando docker build
        - Otimizando Imagens
    - Gerenciamento de imagens (`pull`, `push`, `tag` e `remove`)
        - Baixando Imagens: docker pull
        - Enviando Imagens: docker push
        - Tagging de Imagens: docker tag
        - Removendo Imagens: docker tag
        - Exerc√≠cios Pr√°ticos
4. **Trabalhando com Container Docker üöÄ**
    - Criando e gerenciando container
    - Criando Containers
    - Gerenciando Containers
        - Comandos essenciais (`run`, `stop`, `start` e `remove`)
        - Comando docker run
        - Comando docker stop
        - Comando docker start
        - Comando docker rm
        - Inspecionando e acessando containers
        - Comando docker inspect
        - Comando docker logs
        - Comando docker exec
        - Exerc√≠cios Pr√°ticos

## O que √© Docker?

Docker √© uma plataforma de c√≥digo aberto que facilita a cria√ß√£o, o desenvolvimento, o envio e a execu√ß√£o de aplica√ß√µes em containers. Containers s√£o ambientes isolados que cont√™m tudo o que uma aplica√ß√£o precisa para ser executada: bibliotecas, depend√™ncias, c√≥digo, etc. Isso garante que a aplica√ß√£o funcione de maneira consistente, independentemente do ambiente onde est√° sendo executada.

---

## Vantagens e desvantagens do uso do Docker ‚öñÔ∏è

### Vantagens üåü

1. **Portabilidade**: Containers podem ser executados em qualquer ambiente que tenha o Docker instalado, garantindo que a aplica√ß√£o funcione da mesma maneira em desenvolvimento, teste e produ√ß√£o.
2. **Isolamento**: Cada container opera de forma independente, permitindo a execu√ß√£o de v√°rias aplica√ß√µes em um mesmo host sem conflitos.
3. **Efici√™ncia de Recursos**: Containers compartilham o kernel do sistema operacional, tornando-os mais leves que m√°quinas virtuais.
4. **Facilidade de Gerenciamento**: Com ferramentas como Docker Compose e Docker Swarm, gerenciar m√∫ltiplos containers e ambientes se torna mais f√°cil.
5. **R√°pido Tempo de Inicializa√ß√£o**: Containers iniciam em segundos, comparado a minutos para m√°quinas virtuais.

### Desvantagens ‚ö†Ô∏è

1. **Complexidade Inicial**: Para iniciantes, a curva de aprendizado pode ser √≠ngreme.
2. **Seguran√ßa**: Containers compartilham o kernel do host, o que pode representar riscos de seguran√ßa se n√£o gerenciados corretamente.
3. **Persist√™ncia de Dados**: O gerenciamento de dados persistentes pode ser mais complexo em containers.
4. **Limita√ß√µes de Performance**: Em certos cen√°rios, containers podem ter uma sobrecarga de performance em compara√ß√£o com execu√ß√£o nativa.

---

## Casos de uso do Docker üì¶

Docker pode ser utilizado em uma variedade de cen√°rios, desde desenvolvimento at√© produ√ß√£o. Aqui est√£o alguns exemplos de como Docker pode ser √∫til:

1. **Desenvolvimento Local**: Desenvolvedores podem criar ambientes de desenvolvimento consistentes e replic√°veis, evitando problemas de "funciona na minha m√°quina".
2. **Integra√ß√£o Cont√≠nua (CI) e Entrega Cont√≠nua (CD)**: Docker permite a automa√ß√£o de testes e deploys, garantindo que o c√≥digo funcione conforme esperado em todos os est√°gios do pipeline.
3. **Microservices**: Docker facilita a ado√ß√£o de arquiteturas de microservices, permitindo a implementa√ß√£o, escalonamento e gerenciamento de servi√ßos independentes.
4. **Escalabilidade**: Em ambientes de produ√ß√£o, Docker pode ser utilizado junto com orquestradores como Kubernetes ou Docker Swarm para escalar aplica√ß√µes conforme a demanda.
5. **Ambientes Tempor√°rios**: Docker pode ser usado para criar ambientes de teste ou demonstra√ß√£o que podem ser rapidamente configurados e destru√≠dos sem impacto no sistema principal.

Docker revolucionou a maneira como desenvolvedores e operadores lidam com aplica√ß√µes, proporcionando uma maneira mais eficiente e consistente de gerenciar software em diferentes ambientes. Compreender esses conceitos b√°sicos √© essencial para aproveitar todo o potencial que Docker oferece.

---

# Instala√ß√£o e Configura√ß√£o üõ†Ô∏è

## Windows ü™ü

1. **Requisitos**: Windows 10 Pro, Enterprise ou Education (Build 15063 ou superior) ou Windows 11.
2. **Passos de Instala√ß√£o**:
    - Acesse [Docker Desktop for Windows](https://www.docker.com/products/docker-desktop).
    - Baixe o instalador e execute-o.
    - Siga as instru√ß√µes na tela para completar a instala√ß√£o.
    - Ap√≥s a instala√ß√£o, reinicie o computador.
    - Abra o Docker Desktop e verifique se o Docker est√° em execu√ß√£o com o comando `docker --version` no PowerShell.

## macOS üçè

1. **Requisitos**: macOS 10.14 ou superior.
2. **Passos de Instala√ß√£o**:
    - Acesse [Docker Desktop for Mac](https://www.docker.com/products/docker-desktop).
    - Baixe o instalador `.dmg` e execute-o.
    - Arraste o √≠cone do Docker para a pasta de Aplicativos.
    - Abra o Docker a partir da pasta de Aplicativos.
    - Verifique a instala√ß√£o com o comando `docker --version` no Terminal.

## Linux üêß

1. **Requisitos**: Distribui√ß√µes suportadas incluem Ubuntu, Debian, Fedora, CentOS, etc.
2. **Passos de Instala√ß√£o** (Exemplo para Ubuntu):
    - Atualize o √≠ndice de pacotes: `sudo apt-get update`.
    - Instale pacotes necess√°rios: `sudo apt-get install apt-transport-https ca-certificates curl software-properties-common`.
    - Adicione a chave GPG oficial do Docker: `curl -fsSL <https://download.docker.com/linux/ubuntu/gpg> | sudo apt-key add -`.
    - Adicione o reposit√≥rio Docker: `sudo add-apt-repository "deb [arch=amd64] <https://download.docker.com/linux/ubuntu> $(lsb_release -cs) stable"`.
    - Atualize o √≠ndice de pacotes novamente: `sudo apt-get update`.
    - Instale o Docker: `sudo apt-get install docker-ce`.
    - Verifique a instala√ß√£o com `docker --version`.

## Configura√ß√£o inicial e primeiros passos üéØ

Ap√≥s instalar o Docker, algumas configura√ß√µes iniciais s√£o recomendadas para garantir que tudo funcione corretamente.

### Configura√ß√£o Inicial üîß

1. **Iniciar o Docker**: Certifique-se de que o Docker est√° em execu√ß√£o no seu sistema.
2. **Adicionar seu usu√°rio ao grupo Docker** (Linux):
    - `sudo usermod -aG docker $USER`
    - Reinicie sua sess√£o para aplicar as mudan√ßas.
3. **Testar a instala√ß√£o**:
    - Execute o comando `docker run hello-world` para verificar se o Docker est√° funcionando corretamente. Voc√™ deve ver uma mensagem de confirma√ß√£o.

### Docker CLI (linha de comando) üíª

A Docker CLI √© a interface de linha de comando do Docker, utilizada para interagir com o Docker Engine. A seguir, alguns comandos b√°sicos para come√ßar:

- `docker --version`: Verifica a vers√£o do Docker instalada.
- `docker info`: Exibe informa√ß√µes detalhadas sobre a instala√ß√£o do Docker.
- `docker run [OPTIONS] IMAGE [COMMAND] [ARG...]`: Executa um container a partir de uma imagem especificada.
- `docker ps`: Lista os containers em execu√ß√£o.
- `docker stop [CONTAINER ID]`: Para um container em execu√ß√£o.
- `docker rm [CONTAINER ID]`: Remove um container.
- `docker rmi [IMAGE ID]`: Remove uma imagem.

Exemplo pr√°tico:

```bash
# Verifique a vers√£o do Docker
docker --version

# Puxe uma imagem do Docker Hub
docker pull hello-world

# Execute um container a partir da imagem hello-world
docker run hello-world
```

Esse conjunto inicial de comandos ajuda a familiarizar-se com o funcionamento b√°sico do Docker, preparando voc√™ para explorar conceitos mais avan√ßados nos pr√≥ximos t√≥picos.

---

# Fundamentos do Docker üß†

## Conceitos b√°sicos: Containers, Imagens e Registries üì¶

### Containers üö¢

Containers s√£o unidades leves e port√°teis que cont√™m tudo o que uma aplica√ß√£o precisa para ser executada, incluindo o c√≥digo, bibliotecas, depend√™ncias e vari√°veis de ambiente. Eles compartilham o mesmo kernel do sistema operacional do host, mas s√£o isolados entre si, garantindo que uma aplica√ß√£o n√£o interfira na outra.

- **Isolamento**: Cada container opera em um ambiente isolado, o que significa que os processos dentro de um container n√£o afetam outros containers ou o host.
- **Portabilidade**: Containers podem ser executados em qualquer ambiente que suporte Docker, garantindo consist√™ncia entre desenvolvimento, teste e produ√ß√£o.
- **Efici√™ncia**: Containers utilizam menos recursos que m√°quinas virtuais porque compartilham o kernel do sistema operacional do host.

### Imagens üì∏

Imagens s√£o snapshots imut√°veis de um sistema de arquivos que incluem tudo o que uma aplica√ß√£o precisa para ser executada. Elas servem como modelos para criar containers.

- **Constru√ß√£o**: Imagens s√£o constru√≠das a partir de arquivos chamados Dockerfiles, que cont√™m uma s√©rie de instru√ß√µes para configurar o ambiente de um container.
- **Camadas**: Cada instru√ß√£o no Dockerfile cria uma nova camada na imagem. Isso permite reutiliza√ß√£o e efici√™ncia no armazenamento e transfer√™ncia de imagens.
- **Versionamento**: Imagens podem ser versionadas e compartilhadas atrav√©s de registries, facilitando a colabora√ß√£o e a consist√™ncia entre diferentes ambientes.

### Registries üóÇÔ∏è

Registries s√£o reposit√≥rios onde as imagens Docker s√£o armazenadas e distribu√≠das. Existem registries p√∫blicos, como o Docker Hub, e registries privados que podem ser configurados para necessidades espec√≠ficas de uma organiza√ß√£o.

- **Docker Hub**: O registry p√∫blico mais popular, onde desenvolvedores podem compartilhar e distribuir suas imagens publicamente ou de forma privada.
- **Registries Privados**: Empresas podem configurar registries privados para armazenar e distribuir imagens internamente, oferecendo maior controle e seguran√ßa.
- **Fluxo de Trabalho**: Imagens s√£o constru√≠das localmente e, em seguida, enviadas (push) para um registry. De l√°, elas podem ser puxadas (pull) para qualquer ambiente Docker.

## Arquitetura do Docker üèóÔ∏è

A arquitetura do Docker √© composta por v√°rios componentes que trabalham juntos para facilitar a cria√ß√£o, distribui√ß√£o e execu√ß√£o de containers.

### Docker Engine ‚öôÔ∏è

Docker Engine √© o cora√ß√£o do Docker, respons√°vel pela execu√ß√£o e gerenciamento de containers. Ele √© composto por tr√™s partes principais:

1. **Docker Daemon**: O processo principal que gerencia containers, imagens, volumes e redes Docker. Ele √© executado em segundo plano e responde a comandos da Docker CLI e API.
2. **Docker CLI**: A interface de linha de comando que permite aos usu√°rios interagir com o Docker Daemon para executar comandos como `docker run`, `docker build`, `docker pull`, etc.
3. **REST API**: Uma API que permite que aplica√ß√µes e servi√ßos externos interajam com o Docker Daemon de maneira program√°tica.

### Docker Desktop üñ•Ô∏è

Docker Desktop √© uma aplica√ß√£o para Windows e macOS que fornece uma interface gr√°fica para interagir com o Docker. Ele inclui o Docker Engine, Docker CLI e ferramentas adicionais como Docker Compose e Kubernetes.

- **Integra√ß√£o com o Sistema Operacional**: Docker Desktop facilita a instala√ß√£o e configura√ß√£o do Docker, integrando-se de forma transparente com o sistema operacional.
- **Ferramentas Adicionais**: Inclui Docker Compose para gerenciar multi-containers e Kubernetes para orquestra√ß√£o de containers.

---

Trabalhando com Imagens Docker üì∏

## Dockerfile: Estrutura e Sintaxe üìù

Um Dockerfile √© um script de texto que cont√©m uma s√©rie de instru√ß√µes para construir uma imagem Docker. Cada instru√ß√£o em um Dockerfile cria uma camada na imagem, permitindo a reutiliza√ß√£o e a efici√™ncia no armazenamento. Vamos explorar a estrutura e a sintaxe de um Dockerfile.

### Estrutura B√°sica üèóÔ∏è

Um Dockerfile t√≠pico pode ser dividido nas seguintes se√ß√µes:

1. **Instru√ß√£o FROM**: Especifica a imagem base a partir da qual a nova imagem ser√° constru√≠da.
2. **Instru√ß√£o MAINTAINER**: Define o mantenedor da imagem (embora esta pr√°tica esteja sendo substitu√≠da pelo uso de labels).
3. **Instru√ß√£o RUN**: Executa comandos no container durante o processo de constru√ß√£o.
4. **Instru√ß√£o COPY/ADD**: Copia arquivos e diret√≥rios para a imagem.
5. **Instru√ß√£o CMD/ENTRYPOINT**: Define o comando que ser√° executado quando um container √© iniciado a partir da imagem.
6. **Instru√ß√£o EXPOSE**: Declara a porta na qual o container escutar√° durante a execu√ß√£o.
7. **Instru√ß√£o ENV**: Define vari√°veis de ambiente.
8. **Instru√ß√£o VOLUME**: Cria um ponto de montagem para volumes.

### Exemplo de Dockerfile üëá

Aqui est√° um exemplo de Dockerfile para uma aplica√ß√£o Node.js:

```docker
# Use uma imagem base oficial do Node.js
FROM node:14

# Defina o diret√≥rio de trabalho no container
WORKDIR /usr/src/app

# Copie o package.json e package-lock.json
COPY package*.json ./

# Instale as depend√™ncias
RUN npm install

# Copie o restante do c√≥digo da aplica√ß√£o
COPY . .

# Exponha a porta em que a aplica√ß√£o ser√° executada
EXPOSE 3000

# Defina o comando para iniciar a aplica√ß√£o
CMD ["node", "app.js"]
```

## Criando e construindo imagens Docker üî®

Uma vez que voc√™ tenha um Dockerfile, voc√™ pode usar o comando `docker build` para criar uma imagem Docker a partir dele.

### Comando `docker build` üõ†Ô∏è

O comando `docker build` cria uma imagem a partir de um Dockerfile e de um contexto de constru√ß√£o. O contexto √© o conjunto de arquivos no diret√≥rio atual ou em um caminho especificado.

**Sintaxe**:

```
docker build [OPTIONS] PATH | URL | -
```

**Exemplo**:

```
# Crie uma imagem a partir do Dockerfile no diret√≥rio atual
docker build -t my-node-app .
```

- `t my-node-app`: Tag para a imagem criada.
- `.`: Diret√≥rio atual como contexto de constru√ß√£o.

### Otimizando Imagens üîç

Para criar imagens eficientes e pequenas, siga estas pr√°ticas recomendadas:

1. **Minimize a quantidade de camadas**: Combine m√∫ltiplas instru√ß√µes RUN em uma √∫nica instru√ß√£o.
2. **Use imagens base menores**: Escolha imagens base menores como `alpine` sempre que poss√≠vel.
3. **Aproveite o cache de constru√ß√£o**: Estruture seu Dockerfile para maximizar o uso do cache, colocando instru√ß√µes que mudam menos frequentemente no topo.

## Gerenciamento de imagens (pull, push, tag, remove) üìÇ

### Baixando Imagens: `docker pull` ‚¨áÔ∏è

O comando `docker pull` baixa uma imagem de um registry (como o Docker Hub) para o seu host local.

**Sintaxe**:

```
docker pull [OPTIONS] NAME[:TAG|@DIGEST]
```

**Exemplo:**

```
# Baixe a imagem oficial do Node.js
docker pull node:14
```

### Enviando Imagens: `docker push` ‚¨ÜÔ∏è

O comando `docker push` envia uma imagem do host local para um registry.

**Sintaxe**:

```
docker push [OPTIONS] NAME[:TAG]
```

**Exemplo:**

```
# Envie a imagem para o Docker Hub
docker push my-username/my-node-app:latest
```

### Tagging de Imagens: `docker tag` üè∑Ô∏è

O comando `docker tag` cria uma nova tag para uma imagem existente.

**Sintaxe**:
```
docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]
```

**Exemplo:**

```
# Tag uma imagem com um novo nome e tag
docker tag my-node-app:latest my-username/my-node-app:v1.0
```

### Removendo Imagens: `docker rmi` üóëÔ∏è

O comando `docker rmi` remove uma ou mais imagens do host local.

**Sintaxe**:

```
docker rmi [OPTIONS] IMAGE [IMAGE...]
```

**Exemplo:**

```
# Remova uma imagem pelo nome e tag
docker rmi my-username/my-node-app:v1.0
```

---

### Exerc√≠cios Pr√°ticos üìù

1. **Crie um Dockerfile simples**:
    - Escreva um Dockerfile para uma aplica√ß√£o Python simples que imprime "Hello, Docker!".
    - Construa a imagem e execute um container a partir dela.
2. **Otimize um Dockerfile**:
    - Pegue um Dockerfile existente e otimize-o para reduzir o n√∫mero de camadas.
    - Use uma imagem base menor, como `alpine`.
3. **Gerencie Imagens**:
    - Baixe a imagem oficial do Nginx usando `docker pull`.
    - Crie uma tag personalizada para essa imagem e envie-a para um registry (Docker Hub ou registry privado).
4. **Remova Imagens Antigas**:
    - Liste todas as imagens no seu host local usando `docker images`.
    - Remova as imagens que voc√™ n√£o est√° mais usando para liberar espa√ßo.

---

# Trabalhando com Containers Docker üöÄ

### Criando e gerenciando containers üõ†Ô∏è

Containers s√£o a unidade fundamental de execu√ß√£o no Docker. Eles encapsulam uma aplica√ß√£o e suas depend√™ncias em um ambiente isolado. Vamos explorar como criar e gerenciar containers.

## Criando Containers üê≥

Para criar um container, utilizamos o comando `docker run`, que inicializa um novo container a partir de uma imagem Docker.

**Sintaxe**:

```
docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
```

**Exemplo**:

```
# Crie e execute um container a partir da imagem oficial do Nginx
docker run --name my-nginx -d -p 8080:80 nginx
```

- `-name my-nginx`: Nomeia o container como `my-nginx`.
- `d`: Executa o container em segundo plano (modo "detached").
- `p 8080:80`: Mapeia a porta 80 do container para a porta 8080 no host.
- `nginx`: Especifica a imagem a ser usada.

## Gerenciando Containers üìã

Ap√≥s criar um container, voc√™ pode gerenci√°-lo usando diversos comandos Docker.

- **Listar Containers**:

```
docker ps # Lista containers em execu√ß√£o
docker ps -a # Lista todos os containers, incluindo os parados
```
- **Parar e iniciar um Container**:

```
docker stop [CONTAINER ID/NAME] # Para um container em execu√ß√£o
docker start [CONTAINER ID/NAME] # Inicia um container parado
```

- **Remover um Container**:

```
docker rm [CONTAINER ID/NAME] # Remove um container parado
```

- **Acessar um Container**:

```
docker exec -it [CONTAINER ID/NAME] /bin/bash # Acessa um container em execu√ß√£o
```

### Comandos essenciais (run, stop, start, remove) üîÑ

Vamos explorar alguns dos comandos mais utilizados no gerenciamento de containers.

### Comando `docker run` üèÉ‚Äç‚ôÇÔ∏è

Cria e executa um novo container.

**Exemplo**:

```
docker run -it ubuntu /bin/bash
```

- `it`: Interativo + terminal, permite interagir com o container.
- `ubuntu`: A imagem a ser usada.
- `/bin/bash`: Comando a ser executado no container.

### Comando `docker stop` üõë

Para um container em execu√ß√£o.

**Exemplo**:

```
docker stop my-nginx
```

### Comando `docker start` ‚ñ∂Ô∏è

Inicia um container parado.

**Exemplo**:

```
docker start my-nginx
```

### Comando `docker rm` üóëÔ∏è

Remove um container parado.

**Exemplo**:

```
docker rm my-nginx
```

### Inspecionando e acessando containers üîç

Docker fornece comandos para inspecionar e acessar containers, permitindo verificar o status e a configura√ß√£o de um container.

### Comando `docker inspect` üïµÔ∏è‚Äç‚ôÇÔ∏è

Exibe informa√ß√µes detalhadas sobre um container ou uma imagem.

**Exemplo:**

```
docker inspect my-nginx
```

### Comando `docker logs` üìú

Exibe os logs de um container.

**Exemplo**:

```
docker logs my-nginx
```

### Comando `docker exec` üë®‚Äçüíª

Executa um comando em um container em execu√ß√£o. Isso √© √∫til para acessar o shell de um container.

**Exemplo**:

```
docker exec -it my-nginx /bin/bash
```

### Exerc√≠cios Pr√°ticos üìù

1. **Crie um container interativo**:
    - Use a imagem oficial do Ubuntu para criar um container interativo que execute `/bin/bash`.
    - Explore o sistema de arquivos do container.
2. **Mapeie portas**:
    - Crie um container do Nginx que mapeie a porta 80 do container para a porta 8080 no host.
    - Acesse o servidor Nginx atrav√©s do navegador no endere√ßo `http://localhost:8080`.
3. **Gerencie Containers**:
    - Crie um container e, em seguida, pare, inicie e remova-o utilizando os comandos `docker stop`, `docker start` e `docker rm`.
    - Inspecione o container utilizando `docker inspect` e verifique os logs com `docker logs`.
4. **Acesse um container em execu√ß√£o**:
    - Crie um container a partir da imagem do Ubuntu.
    - Use `docker exec` para acessar o shell do container e crie um arquivo de texto dentro dele.


<<<<<<< HEAD
=======
Docker √© uma plataforma de c√≥digo aberto que facilita a cria√ß√£o, o desenvolvimento, o envio e a execu√ß√£o de aplica√ß√µes em containers. Containers s√£o ambientes isolados que cont√™m tudo o que uma aplica√ß√£o precisa para ser executada: bibliotecas, depend√™ncias, c√≥digo, etc. Isso garante que a aplica√ß√£o funcione de maneira consistente, independentemente do ambiente onde est√° sendo executada.
>>>>>>> 0434950ca3c9fe6092979048be2d8b164f80d3da
